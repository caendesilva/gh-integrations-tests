name: Propagate Release

on:
  # release:
    # types: [published] # https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#release
  push:
    branches:
      - master

  workflow_dispatch:

jobs:
  create-hyde-release-draft: # https://docs.github.com/en/rest/releases/releases#create-a-release
    runs-on: ubuntu-latest
    steps:
      - name: Create release
        run: |
          curl --request POST \
          --url https://api.github.com/repos/caendesilva/gh-integrations-tests-b/releases \
          --header 'Authorization: token ${{ secrets.PAT }}' \
          --header 'content-type: application/json' \
          --data '{"tag_name":"v1.0.0","target_commitish":"master","name":"v1.0.0","body":"Description of the release","draft":false,"prerelease":false,"generate_release_notes":false}'
          --fail
